@using Microsoft.FluentUI.AspNetCore.Components

<div class="page__pagination">
    <!-- Left Section: Display Controls -->
    <div class="page__pagination-left">
        @if (Pagination != null)
        {
            <div class="page__pagination-setter">
                <span class="page__pagination-label">Rows</span>
                <select @bind="@uiStateSvc.PageSize"
                        @bind:after="OnPageSizeChanged"
                        class="page__pagination-select">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                </select>
            </div>
        }

        <FluentSwitch @bind-Value="@uiStateSvc.IsStriped"
                      @bind-Value:after="OnStripeChanged"
                      CheckedMessage="Striped Rows"
                      UncheckedMessage="Solid Rows"
                      Title="Toggle row striping" />
    </div>

    <!-- Center Section: Pagination Controls (optional for future expansion) -->
    <div class="page__pagination-center">
        @ChildContent
    </div>

    <!-- Right Section: Paginator --> @if (Pagination != null)
    {
        <div class="page__pagination-right">
            <FluentPaginator State="@Pagination">
                <SummaryTemplate>
                    <span class="page__pagination-summary">
                        <strong>@(Pagination.TotalItemCount ?? 0)</strong> items
                    </span>
                </SummaryTemplate>
                <PaginationTextTemplate>
                    <span class="page__pagination-text">
                        Page <strong>@(Pagination.CurrentPageIndex + 1)</strong> of <strong>@(Pagination.LastPageIndex + 1)</strong>
                    </span>
                </PaginationTextTemplate>
            </FluentPaginator>
        </div>
    }
</div>

@code {
    [Parameter] public PaginationState Pagination { get; set; } = default!;
    [Parameter] public EventCallback<int> PageSizeChanged { get; set; }
    [Parameter] public EventCallback IsStripedChanged { get; set; }

    [Parameter] public RenderFragment? ChildContent { get; set; }

    private async Task OnPageSizeChanged()
    {
        await PageSizeChanged.InvokeAsync();
    }

    private async Task OnStripeChanged()
    {
        await IsStripedChanged.InvokeAsync();
    }
}
