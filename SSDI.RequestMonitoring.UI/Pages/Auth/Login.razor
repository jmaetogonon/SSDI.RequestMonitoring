@page "/"
@using SSDI.RequestMonitoring.UI.Contracts
@using SSDI.RequestMonitoring.UI.Contracts.Users
@using SSDI.RequestMonitoring.UI.JComponents.Alerts
@layout LoginLayout
@inject IJSRuntime JSRuntime
@inject NavigationManager navigationManager
@inject IAuthenticationSvc authenticationSvc

<PageTitle>Request Monitoring</PageTitle>

<div class="login-page">
    <!-- LEFT PANEL -->
    <div class="login-left">
        <div class="login-left-content">
            <h1>Welcome to <span id="animated-text"></span><span class="cursor">|</span></h1>

            <p>Submit, track, and manage your <strong>Purchase Requests</strong> and <strong>Job Orders</strong> efficiently.</p>

            <button type="button" class="btn-new-request" @onclick="ToggleNewRequest">
                <i class="bi bi-plus-circle-fill"></i> New Request
            </button>
        </div>
        <img src="/images/auth/login-teamwork.svg" alt="Request Illustration" class="login-illustration" />
    </div>

    <!-- RIGHT PANEL -->
    <div class="login-right">
        <div class="login-card">
            <div class="login-header">
                <img src="/images/logo/logo.png" />
                <h2>Sign In</h2>
                <p>Access your account to manage requests</p>
            </div>

            <EditForm Model="@_loginModel" OnValidSubmit="@HandleLogin">
                <div class="login-body">

                    <Alert Message="@AlertMessage" Type="@AlertType" ShowCloseButton="false" @bind-IsVisible="IsShowAlert" />

                    <div class="input-group">
                        <i class="bi bi-person"></i>
                        <input @bind="_loginModel.Username" placeholder="Username" class="input" />
                    </div>

                    <div class="input-group">
                        <i class="bi bi-lock"></i>
                        <input @bind="_loginModel.Password" type="password" placeholder="Password" class="input" />
                    </div>

                    <div class="forgot-password-div">
                        <a href="/forgot-password" class="link">Forgot Password?</a>
                    </div>

                    <button type="submit" class="btn-login">Sign In</button>

                    <div class="login-footer">
                        <p>Don't have an account? Contact admin.</p>
                    </div>
                </div>
            </EditForm>
        </div>
    </div>
</div>

<NewRequestLogin__Modal IsModalVisible="@_isNewRequestModalFormVisible" OnSave="OnAddRequestModalSave" OnClose="OnAddRequestModalClose" />